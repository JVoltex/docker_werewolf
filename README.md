⚠️ メンテナンスやGitHub Container Registryでのイメージ配布をやめます。使ってくださった方、ありがとうございました。

# dr666m1/werewolf
<img src="https://user-images.githubusercontent.com/26474260/104125977-64bcd580-539d-11eb-969a-8562af25f897.png" width=800px>

## 概要
人狼ゲームを起動するdockerイメージのリポジトリです。
オンラインで遊ぶにはパブリックIPのあるサーバーで起動するか、
[ngrok](https://ngrok.com/)などを利用する必要があります。

## 使い方（ホスト）
### dockerコンテナの起動
以下のコマンドで起動します。
初回はGitHub Container Registryからイメージがpullされます。

```
docker container run -it --rm -p 3000:3000 ghcr.io/dr666m1/werewolf
```

### ゲームの設定
コンテナ起動後、役職ごとの人数・相談時間の設定を求められます。
画面の指示に従い、半角数字で入力してください。

<img src="https://user-images.githubusercontent.com/26474260/104125841-b31da480-539c-11eb-9e3a-356c04a178c1.png" width=800px>

### ポートの公開
人狼ゲームが起動しているコンテナを公開します。

#### パブリックIPのあるサーバー
GCEなどパブリックIPのあるサーバーで起動する場合は、特別な操作は必要ありません。
ファイアウォールの設定などは各自確認してください。

#### それ以外の場合
手元のPCで起動する場合は[ngrok](https://ngrok.com/)を利用するのが簡単です。
ただ、無料枠での利用に`4 tunnels / ngrok process`という制限があるようです。

## 使い方（全員）
ここからは参加する全員の操作です。
ブラウザから人狼ゲームが起動しているIPアドレスにアクセスします。
以下のような画面が表示されたら名前を入力して入場してください。
ホストが指定した人数がそろったらゲームが開始します。

<img src="https://user-images.githubusercontent.com/26474260/104126034-a9487100-539d-11eb-8d4c-3666f1b351e8.png" width=800px>

## Q and A
### 役職は何が使える？
現在使える役職は以下です。要望があれば追加するかもしれません。
- 市民
- 人狼
- 占い師
- 霊媒師
- 狩人

### 役職などの設定を次のゲームに使いまわせる？
今の実装だと1ゲームごとにコンテナの起動・役職などの設定・ブラウザの更新が必要になります。

### スマホからも遊べる？
UIはbulmaを利用しているので、スマホ画面にもいい感じに調整されるはずです。
